<!DOCTYPE html>
<html lang="en">
<head>

  <title>StudentResultManagementSystem</title>
  <link rel="stylesheet" href="">
</head>
<body>
  <div class="login">
    <h1>Login</h1>
    <div class="txt">
      <label >username</label>
      <input type="name" id="username" >
    </div>
    <div class="txt">
      <label >username</label>
      <input type="name" id="username" >
    </div>
    <div class="password">Forgot password?</div>
  <button onclick='login()'>Login</button>
  <Script >
      
async function login(){ 
            console.log('login request');
            var username = document.getElementById('username').value;
            var password = document.getElementById('password').value;

            var user = {'username': username, 'password': password}
            console.log(user);  
            var res = await axios.post('/home/login',user);
            var data = res.data;
            console.log(data);
            if(!data.error){
                window.sessionStorage.setItem("token",data.token);
                window.sessionStorage.setItem("username",username);
                console.log("Logged Successfully");
                //window.sessionStorage.setItem('password','');
                if(data.type=='student'){
                  window.open('/student','_self');  
                }
                else if(data.type=='facualty'){
                  window.open('/facualty','_self');
                }
                window.open('/home','_self');  
            }
            else{
               
                document.getElementById('password').value = '';
            }

        }  

  </Script>
</body>
</html>